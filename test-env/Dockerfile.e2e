FROM mcr.microsoft.com/playwright:v1.40.0-focal

WORKDIR /app

# Copy package files and install dependencies
COPY package*.json ./
RUN npm install

# Copy test configuration and files
COPY playwright.config.ts ./
COPY tsconfig.json ./
COPY tests/ ./tests/

# Install browsers
RUN npx playwright install

CMD ["npm", "run", "test:e2e"]