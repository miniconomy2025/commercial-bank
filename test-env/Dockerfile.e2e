FROM mcr.microsoft.com/playwright:v1.40.0-focal

RUN npm install -g pnpm

WORKDIR /app

# Copy package files and install dependencies
COPY package*.json ./
RUN pnpm install

# Copy test configuration and files
COPY playwright.config.ts ./
COPY tsconfig.json ./
COPY tests/ ./tests/

# Install browsers
RUN npx playwright install

CMD ["pnpm", "run", "test:e2e"]

RUN npm install -g pnpm